var permitPropagation=false;var redirect;$(document).ready(function(){$(".btnLogin").click(function(e){var isDisplayed=$(".box-deslogado-login").css("display")=="block"?true:false;if(isDisplayed){fecharBoxLogin()}else{abrirBoxLogin()}e.stopPropagation()});$("#email, #senha").keypress(function(eventPress){emularClickAoPressioanrEnter(eventPress,"#btnEfetuarLogin")});$("body").click(function(){fecharBoxes()});$(".float-box").click(function(e){if(permitPropagation){permitPropagation=false;return}e.stopPropagation()});$("#btnEfetuarLogin").click(efetuarLogin)});function abrirBoxLogin(){$(".box-deslogado-login").show();$(".box-deslogado-login input:first").focus()}function fecharBoxLogin(){$(".box-deslogado-login").hide()}function fecharBoxes(){fecharBoxLogin()}function efetuarLogin(){debugger;$("#btnEfetuarLogin").text("Validando os dados...");var efetuarLoginVO=new EfetuarLoginVO;var validationResult=efetuarLoginVO.validate();if(!validationResult){$("#btnEfetuarLogin").text("Continuar");return}var efetuarLoginJSON=JSON.stringify(efetuarLoginVO);var efetuarLoginResult=encodeURIComponent(efetuarLoginJSON);$.get(efetuarLoginURL+"?data="+efetuarLoginResult,function(data){data=getDataObjectFromJSONEncoded(data);switch(data.status.id){case SUCESSO:var firstTimeUrl=data.result.tipoUsuario.id==1?"/project/new?f=t":"/profile/edit?f=t";$(location).attr("href",redirect?redirect:data.result.firstTime?firstTimeUrl:homepageURL);break;case FALHA:tratarValidationResult(data.result.validationResult,".float-box-login");break;case ERRO_INTERNO:log("[EfetuarLogin] -> Erro interno no sistema.");abrirBoxFalhaComMensagem('Ocorreu um erro inesperado. Caso o erro persista, entre em contato conosco através do e-mail <a href="mailto:contato@99freelas.com.br">contato@99freelas.com.br</a>.');break}$("#btnEfetuarLogin").text("Continuar")}).fail(function(){log("[EfetuarLogin] -> Fail.");abrirBoxFalhaComMensagem('Ocorreu um erro inesperado. Caso o erro persista, entre em contato conosco através do e-mail <a href="mailto:contato@99freelas.com.br">contato@99freelas.com.br</a>.');$("#btnEfetuarLogin").text("Continuar")})}